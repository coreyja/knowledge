name: main Branch CI/CD

on:
  push:
    branches:
      - main

jobs:
  tests:
    uses: ./.github/workflows/rust_tests.yml
    name: Rust Tests

  end2end:
    uses: ./.github/workflows/playwright.yml
    name: Playwright Tests

  deploy:
    secrets: inherit
    needs:
      - tests
      - end2end
    uses: ./.github/workflows/deploy.yml
    name: Deploy
